<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>Role Management</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
  <div class="main">
        {% include 'common/sidebar.html' %}
        <div class="main-content">
          <div class="reports-section">
           {% include 'common/topbar.html' %}
          <br>
          <div class="reports-section-header">
            <h1>Role Management</h1>
          </div>
                
          <!-- Table Content -->
          <div class="reports-table-container">
            <table id="reportTable">
            <thead>
              <tr>
                <th scope="col">User ID</th>
                <th scope="col">Username</th>
                <th scope="col">Email</th>
                <th scope="col">Role</th>
                <th scope="col">Update Role</th>
              </tr>
            </thead>
            <tbody>
              {% for user in users %}
              <tr>
                <td>{{ user.user_id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.role | capitalize }}</td>
                <td>
                  <div class="select" data-user-id="{{ user.user_id }}">
                      <div class="selected" data-default="{{ user.role | capitalize }}">
                      {{ user.role | capitalize }}
                      <svg
                          xmlns="http://www.w3.org/2000/svg"
                          height="1em"
                          viewBox="0 0 512 512"
                          class="arrow"
                      >
                          <path
                          d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"
                          ></path>
                      </svg>
                      </div>
                      <div class="options">
                      {% for role_option in ['user', 'admin'] %}
                          {% if role_option != user.role %}
                          <div title="option-{{ loop.index }}">
                            <input id="option-{{ loop.index }}-{{ user.user_id }}" name="option-{{ user.user_id }}" type="radio" />
                            <label class="option" for="option-{{ loop.index }}-{{ user.user_id }}" data-role="{{ role_option }}">
                              {{ role_option | capitalize }}
                            </label>
                          </div>
                          {% endif %}
                      {% endfor %}
                      </div>
                  </div>
                  </td>

              </tr>
              {% endfor %}
            </tbody>
          </table>
          <div class="d-flex justify-content-center mt-4" id="paginationContainer"></div>
        </div>
      </div>

  <script>
    const csrfToken = "{{ csrf_token }}";
  </script>
  <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }
    </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script src="{{ url_for('static', filename='js/role_management.js') }}"></script>
</body>

</html>
